(window.webpackJsonp=window.webpackJsonp||[]).push([[403,402,404,407,410],{3315:function(I,J,w){var v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,j=(O,i)=>{for(var p in i)v(O,p,{get:i[p],enumerable:!0})},D=(O,i,p,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of x(i))!S.call(O,s)&&s!==p&&v(O,s,{get:()=>i[s],enumerable:!(n=y(i,s))||n.enumerable});return O},m=O=>D(v({},"__esModule",{value:!0}),O),C={};j(C,{emptyStoryConf:()=>a,htmlEditorToolbar:()=>g,storyCreationViews:()=>c,storyTellingModeIcons:()=>E,storyTellingModes:()=>b}),I.exports=m(C);const b={CREATE:"create",PLAY:"play"},E={[b.CREATE]:"add",[b.PLAY]:"play_arrow"},c={STORY_CREATION:"story",STEP_CREATION:"step",PREVIEW:"preview"},a={chapters:[],steps:[]},g=[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],[{color:[]},{background:[]}],["link","image"],["clean"]]},3316:function(I,J,w){var v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,m=(p,n,s)=>n in p?v(p,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[n]=s,C=(p,n)=>{for(var s in n||(n={}))j.call(n,s)&&m(p,s,n[s]);if(S)for(var s of S(n))D.call(n,s)&&m(p,s,n[s]);return p},b=(p,n)=>{for(var s in n)v(p,s,{get:n[s],enumerable:!0})},E=(p,n,s,R)=>{if(n&&typeof n=="object"||typeof n=="function")for(let M of x(n))!j.call(p,M)&&M!==s&&v(p,M,{get:()=>n[M],enumerable:!(R=y(n,M))||R.enumerable});return p},c=p=>E(v({},"__esModule",{value:!0}),p),a={};b(a,{default:()=>i}),I.exports=c(a);var g=w(3315),i={id:"dataNarrator",storyConf:C({},g.emptyStoryConf),htmlContents:{},htmlContentsImages:{},autoplay:!1,active:!1,keepOpen:!0,name:"Story Telling Tool",glyphicon:"glyphicon-book",renderToWindow:!0,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!1,initialWidth:500,initialWidthMobile:300,storyInterval:null}},3342:function(I,J,w){var v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,j=(c,a)=>{for(var g in a)v(c,g,{get:a[g],enumerable:!0})},D=(c,a,g,O)=>{if(a&&typeof a=="object"||typeof a=="function")for(let i of x(a))!S.call(c,i)&&i!==g&&v(c,i,{get:()=>a[i],enumerable:!(O=y(a,i))||O.enumerable});return c},m=c=>D(v({},"__esModule",{value:!0}),c),C={};j(C,{getHTMLContentReference:()=>E,getStepReference:()=>b}),I.exports=m(C);function b(c,a){return`${c}.${a}`}function E(c,a){return`step_${c}-${a}`}},3343:function(I,J,w){var v=Object.create,y=Object.defineProperty,x=Object.defineProperties,S=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,c=(r,l,f)=>l in r?y(r,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):r[l]=f,a=(r,l)=>{for(var f in l||(l={}))b.call(l,f)&&c(r,f,l[f]);if(m)for(var f of m(l))E.call(l,f)&&c(r,f,l[f]);return r},g=(r,l)=>x(r,j(l)),O=(r,l)=>{for(var f in l)y(r,f,{get:l[f],enumerable:!0})},i=(r,l,f,W)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of D(l))!b.call(r,e)&&e!==f&&y(r,e,{get:()=>l[e],enumerable:!(W=S(l,e))||W.enumerable});return r},p=(r,l,f)=>(f=r!=null?v(C(r)):{},i(l||!r||!r.__esModule?y(f,"default",{value:r,enumerable:!0}):f,r)),n=r=>i(y({},"__esModule",{value:!0}),r),s={};O(s,{default:()=>F}),I.exports=n(s);var R=p(w(3406)),M=p(w(3316));const N=JSON.parse(JSON.stringify(M.default));var F=g(a({},R.default),{resetModule({commit:r}){r("setStoryConf",N.storyConf),r("setHtmlContents",N.htmlContents),r("setHtmlContentsImages",N.htmlContentsImages),r("setInitialWidth",N.initialWidth)},resetCreatorContent({commit:r}){r("setHtmlContents",N.htmlContents),r("setHtmlContentsImages",N.htmlContentsImages),r("setInitialWidth",N.initialWidth)}})},3406:function(I,J,w){var v=Object.create,y=Object.defineProperty,x=Object.defineProperties,S=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,c=(e,t,o)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t)=>{for(var o in t||(t={}))b.call(t,o)&&c(e,o,t[o]);if(m)for(var o of m(t))E.call(t,o)&&c(e,o,t[o]);return e},g=(e,t)=>x(e,j(t)),O=(e,t)=>{for(var o in t)y(e,o,{get:t[o],enumerable:!0})},i=(e,t,o,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let _ of D(t))!b.call(e,_)&&_!==o&&y(e,_,{get:()=>t[_],enumerable:!(d=S(t,_))||d.enumerable});return e},p=(e,t,o)=>(o=e!=null?v(C(e)):{},i(t||!e||!e.__esModule?y(o,"default",{value:e,enumerable:!0}):o,e)),n=e=>i(y({},"__esModule",{value:!0}),e),s={};O(s,{default:()=>W}),I.exports=n(s);var R=p(w(3921)),M=p(w(3922)),N=w(3342);function V({state:e,commit:t},{chapterNumber:o,stepNumber:d,htmlContent:_,htmlContentImages:T,previousHtmlReference:P}){const u=a({},e.htmlContents),h=a({},e.htmlContentsImages),A=(0,N.getHTMLContentReference)(o,d);return P&&(delete u[P],delete h[P]),t("setHtmlContents",g(a({},u),{[A]:_})),t("setHtmlContentsImages",g(a({},h),{[A]:T})),`${A}.html`}function F({state:e,commit:t},o){const d=e.storyConf.chapters,_=g(a({},e.storyConf),{chapters:[...d,o]});t("setStoryConf",_)}function r({state:e,commit:t},{previousStepReference:o,step:d}){const _=e.storyConf.steps.filter(({associatedChapter:u,stepNumber:h})=>!o||o!==(0,N.getStepReference)(u,h)),T=[..._,d].sort((u,h)=>(u.associatedChapter>h.associatedChapter)-(u.associatedChapter<h.associatedChapter)||(u.stepNumber>h.stepNumber)-(u.stepNumber<h.stepNumber)),P=g(a({},e.storyConf),{steps:T});t("setStoryConf",P)}function l({state:e,commit:t},{associatedChapter:o,stepNumber:d}){const _=e.storyConf.steps.filter(u=>o!==u.associatedChapter||d!==u.stepNumber),T=!_.some(u=>u.associatedChapter===o),P=T?e.storyConf.chapters.filter(({chapterNumber:u})=>u!==o):e.storyConf.chapters;t("setStoryConf",g(a({},e.storyConf),{chapters:P,steps:_}))}function f({state:e}){const t=new R.default,o=Object.entries(e.htmlContents),d=a({},e.storyConf);if(o.length){const _="story";t.folder(_),d.htmlFolder=_;for(const T of o){const P=T[0],u=e.htmlContentsImages[P]||[],h=`${_}/images`,[A,U]=P.split(".").map(Number),L=`${_}/${P}.html`;let H=T[1];u.length&&t.folder(h);for(const[$,k]of u.entries()){const Y=$+1,z=`${_}/images/${P}_${Y}.${k.fileExtension}`;t.file(z,k.dataUrl.replace(/data:.+?base64,/,""),{base64:!0}),H=H.replace(k.dataUrl,`assets/${z}`)}d.steps=d.steps.map($=>$.associatedChapter!==A||$.stepNumber!==U?$:{step:$,htmlFile:L}),t.file(L,H)}}t.file("story.json",JSON.stringify(d)),t.generateAsync({type:"blob"}).then(_=>{M.default.saveAs(_,"story.zip")})}var W={saveHtmlContent:V,addStoryChapter:F,saveStoryStep:r,deleteStoryStep:l,downloadStoryFiles:f}}}]);
