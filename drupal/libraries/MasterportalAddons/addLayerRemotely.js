(window.webpackJsonp=window.webpackJsonp||[]).push([[27,107,108,109,110,111,112,113],{189:function(b,V,c){var a=Object.create,_=Object.defineProperty,S=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,T=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,D=(o,e)=>{for(var s in e)_(o,s,{get:e[s],enumerable:!0})},j=(o,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let y of h(e))!I.call(o,y)&&y!==s&&_(o,y,{get:()=>e[y],enumerable:!(i=S(e,y))||i.enumerable});return o},w=(o,e,s)=>(s=o!=null?a(T(o)):{},j(e||!o||!o.__esModule?_(s,"default",{value:o,enumerable:!0}):s,o)),x=o=>j(_({},"__esModule",{value:!0}),o),u={};D(u,{default:()=>d}),b.exports=x(u);var L=w(c(3530)),p=w(c(3531)),r=w(c(3532)),l=w(c(3533)),d={addLayerRemotelyRadioBridge:L.default,store:p.default,locales:{de:r.default,en:l.default}}},3396:function(b,V,c){(function(a,_){var S=Object.defineProperty,h=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,I=Object.prototype.hasOwnProperty,D=(p,r)=>{for(var l in r)S(p,l,{get:r[l],enumerable:!0})},j=(p,r,l,d)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of T(r))!I.call(p,o)&&o!==l&&S(p,o,{get:()=>r[o],enumerable:!(d=h(r,o))||d.enumerable});return p},w=p=>j(S({},"__esModule",{value:!0}),p),x={};D(x,{getFeatureIds:()=>u,returnGeoJSONLayerObject:()=>L}),b.exports=w(x);function u(p){var r,l;const d=[],o=a.request("Map","getLayers").getArray().find(e=>e.get("id")===p);return typeof o>"u"?(console.warn(_.t("common:modules.featureViaURL.messages.layerNotFound")),d):(o.getSource().getFeatures().forEach(e=>{d.push(e.getId())}),d.length<1&&((l=(r=o.getSource())==null?void 0:r.getSource())==null?void 0:l.getFeatures().length)&&o.getSource().getSource().getFeatures().forEach(e=>{d.push(e.getId())}),d)}function L(p,r,l,d,o,e="showAll",s=void 0,i="default",y=void 0){const P={type:"layer",name:p,id:r,typ:"GeoJSON",geojson:l,transparent:!0,minScale:null,maxScale:null,gfiAttributes:e,layerAttribution:"nicht vorhanden",legendURL:"",isBaseLayer:!1,isSelected:!0,isVisibleInTree:!0,cache:!1,datasets:[],urlIsVisible:!0,gfiTheme:i};return d!==void 0&&(P.styleId=d),o!==void 0&&(P.parentId=o),s!==void 0&&(P.clusterDistance=s),y!==void 0&&(P.mouseHoverField=y),P}}).call(this,c(2),c(5))},3397:function(b,V,c){(function(a,_){var S=Object.create,h=Object.defineProperty,T=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,D=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,w=(t,n)=>{for(var v in n)h(t,v,{get:n[v],enumerable:!0})},x=(t,n,v,E)=>{if(n&&typeof n=="object"||typeof n=="function")for(let g of I(n))!j.call(t,g)&&g!==v&&h(t,g,{get:()=>n[g],enumerable:!(E=T(n,g))||E.enumerable});return t},u=(t,n,v)=>(v=t!=null?S(D(t)):{},x(n||!t||!t.__esModule?h(v,"default",{value:t,enumerable:!0}):v,t)),L=t=>x(h({},"__esModule",{value:!0}),t),p={};w(p,{default:()=>s,getIfInExtent:()=>P,getParsedTitle:()=>C,getReversedData:()=>G,isVersionEnabled:()=>y,parseLayer:()=>i}),b.exports=L(p);var r=c(50),l=c(4),d=u(c(54)),o=u(c(20)),e=u(c(8));function s(t,n,v,E){if(t.includes("http:")){console.error("https required");return}a.trigger("Util","showLoader"),(0,o.default)({timeout:4e4,url:t+"?request=GetCapabilities&service=WMS"}).then(g=>g.data).then(g=>{var O,M;a.trigger("Util","hideLoader");try{const A=new r.WMSCapabilities,f=A.read(g),F=f?.version,N=y(F),Z=(M=(O=a.request("Parser","getPortalConfig"))==null?void 0:O.mapView)==null?void 0:M.extent,U=e.default.getters["Maps/projection"].code_;let W=P(f,Z,U),J="external_",B=f;if(!N){const m=G(g);B=A.read(m),W=P(B,Z,U)}if(!W){console.error("Layer is outside the map extent");return}a.request("Parser","getItemByAttributes",{id:"ExternalLayer"})===void 0&&(a.trigger("Parser","addFolder",v,"ExternalLayer","tree",0),a.trigger("ModelList","renderTree"),_("#Overlayer").parent().after(_("#ExternalLayer").parent())),J=J+C(B.Service.Title),a.trigger("Parser","addFolder",B.Service.Title,J,"ExternalLayer",0),n?n.forEach(m=>{const z={id:C(m.title),name:m.title,parentId:J,level:1,layers:m.name,url:t,version:F,transparent:m.layerTransparent?m.layerTransparent:!0,isSelected:m.layerOn?!0:m.layerOn,time:m.layerTime?m.layerTime:!1,infoFormat:m.infoFormat?m.infoFormat:"text/xml",styles:m.style?m.style:"",cache:!1,datasets:[],featureCount:3,format:"image/png",gfiAttributes:"showAll",gutter:"0",isBaseLayer:!1,layerAttribution:"nicht vorhanden",legendURL:"",maxScale:"2500000",minScale:"0",singleTile:!1,supported:["2D","3D"],tilesize:"512",typ:"WMS",type:"layer",urlIsVisible:!0};a.trigger("Parser","addItem",z),a.trigger("ModelList","addModelsByAttributes",{id:C(m.title)})}):B.Capability.Layer.Layer.forEach(m=>{i(m,J,1,F,t),a.trigger("ModelList","addModelsByAttributes",{id:C(m.Title)})}),E&&a.trigger("Map","zoomToExtent",{extent:W}),a.trigger("ModelList","closeAllExpandedFolder")}catch(A){console.error(A)}},g=>{a.trigger("Util","hideLoader"),console.error(g)})}function i(t,n,v,E,g){Object.prototype.hasOwnProperty.call(t,"Layer")?(t.Layer.forEach(O=>{i(O,C(t.Title),v+1)}),a.trigger("Parser","addFolder",t.Title,C(t.Title),n,v,!1,!1,t.invertLayerOrder)):a.trigger("Parser","addLayer",t.Title,C(t.Title),n,v,t.Name,g,E,{isSelected:!0})}function y(t){if(typeof t!="string")return!1;const n=t.split(".");return parseInt(n[0],10)<1?!1:!(n.length>=2&&parseInt(n[0],10)===1&&parseInt(n[1],10)<3)}function P(t,n,v){var E,g,O;const M=(O=(g=(E=t?.Capability)==null?void 0:E.Layer)==null?void 0:g.BoundingBox)==null?void 0:O.filter(f=>f?.crs&&f?.crs.includes("EPSG")&&d.default.getProjection(f?.crs)!==void 0&&Array.isArray(f?.extent)&&f?.extent.length===4);let A;if(Array.isArray(M)&&M.length){let f=[],F=[];return M.forEach(N=>{N.crs===v&&(f=[N.extent[0],N.extent[1]],F=[N.extent[2],N.extent[3]])}),!f.length&&!F.length&&(f=d.default.transformCoord(M[0].crs,v,[M[0].extent[0],M[0].extent[1]]),F=d.default.transformCoord(M[0].crs,v,[M[0].extent[2],M[0].extent[3]])),A=[f[0],f[1],F[0],F[1]],!Array.isArray(n)||n.length!==4||(0,l.intersects)(n,A)?A:!1}return!0}function G(t){let n=new XMLSerializer().serializeToString(t);return n=n.replace(/<SRS>/g,"<CRS>").replace(/<\/SRS>/g,"</CRS>").replace(/SRS=/g,"CRS="),n=new DOMParser().parseFromString(n,"text/xml"),n}function C(t){return String(t).replace(/\s+/g,"-").replace(/\//g,"-").replace(/:/g,"-").replace(/\(/g,"-").replace(/\)/g,"-")}}).call(this,c(2),c(13))},3489:function(b,V,c){(function(a,_){var S=Object.create,h=Object.defineProperty,T=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,D=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,w=(e,s)=>{for(var i in s)h(e,i,{get:s[i],enumerable:!0})},x=(e,s,i,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let P of I(s))!j.call(e,P)&&P!==i&&h(e,P,{get:()=>s[P],enumerable:!(y=T(s,P))||y.enumerable});return e},u=(e,s,i)=>(i=e!=null?S(D(e)):{},x(s||!e||!e.__esModule?h(i,"default",{value:e,enumerable:!0}):i,e)),L=e=>x(h({},"__esModule",{value:!0}),e),p={};w(p,{default:()=>o}),b.exports=L(p);var r=c(3396),l=u(c(3397)),d=u(c(72)),o={addGeoJson({rootState:e},{name:s,id:i,geoJSON:y,styleId:P,folderName:G,gfiAttributes:C,zoomTo:t=!0,clusterDistance:n=void 0,gfiTheme:v="default",mouseHoverField:E=void 0}){const g=a.request("Parser","getTreeType"),O=mapCollection.getMap("2D"),M=O?O.getLayers().getArray().find(F=>F.get("id")===i):void 0;let A="",f={};M?(O?.removeLayer(M),a.trigger("ModelList","removeModelsById",i),a.trigger("ModelList","removeLayerById",i),a.trigger("Parser","removeItem",i)):y?.styles&&d.default.addToStyleList(y.styles),g==="custom"||g==="default"?(a.request("Parser","getItemByAttributes",{id:"ExternalLayer"})===void 0&&(a.trigger("Parser","addFolder",G,"ExternalLayer","tree",0),a.trigger("ModelList","renderTree"),_("#Overlayer").parent().after(_("#ExternalLayer").parent())),A="ExternalLayer"):A="tree",f=(0,r.returnGeoJSONLayerObject)(s,i,y,P,A,C,n,v,E),a.trigger("Parser","addItem",f),a.trigger("ModelList","addModelsByAttributes",{id:i}),a.trigger("ModelList","renderTree"),E&&(e.MouseHover.mouseHoverLayers.push(f),e.MouseHover.mouseHoverInfos.push({id:f.id,mouseHoverField:f.mouseHoverField})),g==="light"&&a.trigger("ModelList","refreshLightTree"),t&&a.trigger("Map","zoomToFilteredFeatures",(0,r.getFeatureIds)(i),i),window.addEventListener("touchmove",()=>O.getView().getZoom()<O.getView().getMinZoom()?(O.getView().setZoom(O.getView().getMinZoom()),!1):O.getView().getZoom()>O.getView().getMaxZoom()?(O.getView().setZoom(O.getView().getMaxZoom()),!1):!0)},addWMS(e,{url:s,layersToLoad:i=void 0,folderName:y="Externe Daten",zoomTo:P=!1}){(0,l.default)(s,i,y,P)},toggleLayerVisibility(e,{layerId:s}){const i=a.request("ModelList","getModelByAttributes",{id:s});i&&a.trigger("ModelList","setModelAttributesById",s,{isSelected:!i.get("isSelected")})}}}).call(this,c(2),c(13))},3530:function(b,V,c){(function(a){var _=Object.create,S=Object.defineProperty,h=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,I=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,j=(u,L,p,r)=>{if(L&&typeof L=="object"||typeof L=="function")for(let l of T(L))!D.call(u,l)&&l!==p&&S(u,l,{get:()=>L[l],enumerable:!(r=h(L,l))||r.enumerable});return u},w=(u,L,p)=>(p=u!=null?_(I(u)):{},j(L||!u||!u.__esModule?S(p,"default",{value:u,enumerable:!0}):p,u)),x=w(c(8));a.channel("addLayerRemotely").on({addGeoJson:function(u){x.default.dispatch("AddLayerRemotely/addGeoJson",u)},addWMS:function(u){x.default.dispatch("AddLayerRemotely/addWMS",u)}})}).call(this,c(2))},3531:function(b,V,c){var a=Object.create,_=Object.defineProperty,S=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,T=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,D=(r,l)=>{for(var d in l)_(r,d,{get:l[d],enumerable:!0})},j=(r,l,d,o)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of h(l))!I.call(r,e)&&e!==d&&_(r,e,{get:()=>l[e],enumerable:!(o=S(l,e))||o.enumerable});return r},w=(r,l,d)=>(d=r!=null?a(T(r)):{},j(l||!r||!r.__esModule?_(d,"default",{value:r,enumerable:!0}):d,r)),x=r=>j(_({},"__esModule",{value:!0}),r),u={};D(u,{default:()=>p}),b.exports=x(u);var L=w(c(3489)),p={namespaced:!0,actions:L.default}},3532:function(b){b.exports=JSON.parse('{"modules":{"addGeoJsonRemotely":{"folderName":"Externe geladene Feature"}}}')},3533:function(b){b.exports=JSON.parse('{"modules":{"addGeoJsonRemotely":{"folderName":"Externally loaded Feature"}}}')}}]);
