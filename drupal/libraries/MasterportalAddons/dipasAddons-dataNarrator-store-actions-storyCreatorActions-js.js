(window.webpackJsonp=window.webpackJsonp||[]).push([[402,410],{3342:function(O,J,g){var m=Object.defineProperty,u=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,S=(p,o)=>{for(var c in o)m(p,c,{get:o[c],enumerable:!0})},j=(p,o,c,d)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of P(o))!w.call(p,i)&&i!==c&&m(p,i,{get:()=>o[i],enumerable:!(d=u(o,i))||d.enumerable});return p},C=p=>j(m({},"__esModule",{value:!0}),p),v={};S(v,{getHTMLContentReference:()=>N,getStepReference:()=>b}),O.exports=C(v);function b(p,o){return`${p}.${o}`}function N(p,o){return`step_${p}-${o}`}},3406:function(O,J,g){var m=Object.create,u=Object.defineProperty,P=Object.defineProperties,w=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&p(e,r,t[r]);if(C)for(var r of C(t))N.call(t,r)&&p(e,r,t[r]);return e},c=(e,t)=>P(e,S(t)),d=(e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})},i=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of j(t))!b.call(e,n)&&n!==r&&u(e,n,{get:()=>t[n],enumerable:!(a=w(t,n))||a.enumerable});return e},I=(e,t,r)=>(r=e!=null?m(v(e)):{},i(t||!e||!e.__esModule?u(r,"default",{value:e,enumerable:!0}):r,e)),E=e=>i(u({},"__esModule",{value:!0}),e),F={};d(F,{default:()=>V}),O.exports=E(F);var H=I(g(3921)),z=I(g(3922)),M=g(3342);function A({state:e,commit:t},{chapterNumber:r,stepNumber:a,htmlContent:n,htmlContentImages:_,previousHtmlReference:l}){const s=o({},e.htmlContents),f=o({},e.htmlContentsImages),h=(0,M.getHTMLContentReference)(r,a);return l&&(delete s[l],delete f[l]),t("setHtmlContents",c(o({},s),{[h]:n})),t("setHtmlContentsImages",c(o({},f),{[h]:_})),`${h}.html`}function L({state:e,commit:t},r){const a=e.storyConf.chapters,n=c(o({},e.storyConf),{chapters:[...a,r]});t("setStoryConf",n)}function T({state:e,commit:t},{previousStepReference:r,step:a}){const n=e.storyConf.steps.filter(({associatedChapter:s,stepNumber:f})=>!r||r!==(0,M.getStepReference)(s,f)),_=[...n,a].sort((s,f)=>(s.associatedChapter>f.associatedChapter)-(s.associatedChapter<f.associatedChapter)||(s.stepNumber>f.stepNumber)-(s.stepNumber<f.stepNumber)),l=c(o({},e.storyConf),{steps:_});t("setStoryConf",l)}function U({state:e,commit:t},{associatedChapter:r,stepNumber:a}){const n=e.storyConf.steps.filter(s=>r!==s.associatedChapter||a!==s.stepNumber),_=!n.some(s=>s.associatedChapter===r),l=_?e.storyConf.chapters.filter(({chapterNumber:s})=>s!==r):e.storyConf.chapters;t("setStoryConf",c(o({},e.storyConf),{chapters:l,steps:n}))}function k({state:e}){const t=new H.default,r=Object.entries(e.htmlContents),a=o({},e.storyConf);if(r.length){const n="story";t.folder(n),a.htmlFolder=n;for(const _ of r){const l=_[0],s=e.htmlContentsImages[l]||[],f=`${n}/images`,[h,G]=l.split(".").map(Number),R=`${n}/${l}.html`;let $=_[1];s.length&&t.folder(f);for(const[y,x]of s.entries()){const K=y+1,D=`${n}/images/${l}_${K}.${x.fileExtension}`;t.file(D,x.dataUrl.replace(/data:.+?base64,/,""),{base64:!0}),$=$.replace(x.dataUrl,`assets/${D}`)}a.steps=a.steps.map(y=>y.associatedChapter!==h||y.stepNumber!==G?y:{step:y,htmlFile:R}),t.file(R,$)}}t.file("story.json",JSON.stringify(a)),t.generateAsync({type:"blob"}).then(n=>{z.default.saveAs(n,"story.zip")})}var V={saveHtmlContent:A,addStoryChapter:L,saveStoryStep:T,deleteStoryStep:U,downloadStoryFiles:k}}}]);
