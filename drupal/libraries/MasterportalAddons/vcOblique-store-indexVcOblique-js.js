(window.webpackJsonp=window.webpackJsonp||[]).push([[527,525,526,528,529],{3359:function(V,x,p){var f=Object.defineProperty,i=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,O=(v,s)=>{for(var u in s)f(v,u,{get:s[u],enumerable:!0})},S=(v,s,u,g)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of m(s))!j.call(v,c)&&c!==u&&f(v,c,{get:()=>s[c],enumerable:!(g=i(s,c))||g.enumerable});return v},b=v=>S(f({},"__esModule",{value:!0}),v),M={};O(M,{default:()=>h}),V.exports=b(M);var h={active:!1,id:"vcOblique",name:"additional:menu.tools.obliqueViewer",icon:"bi-camera-fill",styleId:"",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!0,initialWidth:500,obliqueViewerURL:"",lastCoordinates:"",defaultMapMarkerStyleId:"",heading:0,serviceId:"oblique"}},3486:function(V,x,p){var f=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,y=(r,t,e)=>t in r?i(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h=(r,t)=>{for(var e in t||(t={}))b.call(t,e)&&y(r,e,t[e]);if(O)for(var e of O(t))M.call(t,e)&&y(r,e,t[e]);return r},v=(r,t)=>{for(var e in t)i(r,e,{get:t[e],enumerable:!0})},s=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of j(t))!b.call(r,l)&&l!==e&&i(r,l,{get:()=>t[l],enumerable:!(o=m(t,l))||o.enumerable});return r},u=(r,t,e)=>(e=r!=null?f(S(r)):{},s(t||!r||!r.__esModule?i(e,"default",{value:r,enumerable:!0}):e,r)),g=r=>s(i({},"__esModule",{value:!0}),r),c={};v(c,{default:()=>n}),V.exports=g(c);var E=p(7),I=u(p(3359)),n=h({},(0,E.generateSimpleMutations)(I.default))},3516:function(V,x,p){(function(f){var i=Object.create,m=Object.defineProperty,j=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,S=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,M=(a,n)=>{for(var r in n)m(a,r,{get:n[r],enumerable:!0})},y=(a,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of O(n))!b.call(a,e)&&e!==r&&m(a,e,{get:()=>n[e],enumerable:!(t=j(n,e))||t.enumerable});return a},h=(a,n,r)=>(r=a!=null?i(S(a)):{},y(n||!a||!a.__esModule?m(r,"default",{value:a,enumerable:!0}):r,a)),v=a=>y(m({},"__esModule",{value:!0}),a),s=(a,n,r)=>new Promise((t,e)=>{var o=_=>{try{d(r.next(_))}catch(q){e(q)}},l=_=>{try{d(r.throw(_))}catch(q){e(q)}},d=_=>_.done?t(_.value):Promise.resolve(_.value).then(o,l);d((r=r.apply(a,n)).next())}),u={};M(u,{default:()=>I}),V.exports=v(u);var g=h(p(54)),c=h(p(64)),I={initObliqueView({commit:a,dispatch:n,getters:r,rootGetters:t}){const e=document.getElementById("obliqueIframe");e?.addEventListener("load",()=>{const o=new MutationObserver(()=>{const l=e.contentWindow.document.getElementById("header"),d=e.contentWindow.document.getElementsByClassName("vcm-btn-icon single-first maptool-btn vcm-btn-base-default vcm-btn-base-splash-hover vcm-border vcm-border-dye03 vcm-btn-icon-font-default vcm-btn-icon-font-dye01-hover vcm-no-select vcm-btn-map-Oblique")[0],_=e.contentWindow.document.getElementsByClassName("overview-map-wrap")[0],q=document.getElementById("obliqueIframe").contentWindow.vcs,P=q.vcm.Framework.getInstance().getActiveMap(),C=mapCollection.getMap("2D").getPixelFromCoordinate(t["Maps/initialCenter"]),D=e.contentWindow.document.getElementsByClassName("mapElement vcm-map-top");if(a("Maps/setClickCartesianCoordinate",C,{root:!0}),P&&(P.olMap.on("moveend",()=>{const w=g.default.transform("EPSG:4326",mapCollection.getMapView("2D").getProjection().getCode(),P.getViewPointSync().groundPosition);w.every((N,k)=>Math.round(N)!==Math.round(r.lastCoordinates[k])&&(N-r.lastCoordinates[k]>50||N-r.lastCoordinates[k]<-50)?(n("setObliqueView",w),!1):!0)}),P.imageChanged.addEventListener(()=>s(this,null,function*(){const w=yield P.getViewPoint();w.heading!==r.heading&&n("MapMarker/rotatePointMarker",w.heading,{root:!0}),a("setHeading",w.heading)}))),l){l.style.display="none",l.parentElement.style.display="none";for(const w of D)w.style.top=0;a("setDefaultMapMarkerStyleId",t["MapMarker/pointStyleId"]),r.styleId&&a("MapMarker/setPointStyleId",r.styleId,{root:!0}),n("setObliqueView",t["Maps/center"]),o.disconnect()}d&&(d.style.display="none"),_&&(_.style.display="none")});o.observe(e.contentDocument,{childList:!0,subtree:!0})})},resetObliqueViewer({commit:a,dispatch:n,getters:r}){a("MapMarker/setPointStyleId",r.defaultMapMarkerStyleId,{root:!0}),n("MapMarker/removePointMarker",null,{root:!0})},setObliqueView(a){return s(this,arguments,function*({commit:n,dispatch:r,getters:t},e=[]){var o,l,d,_,q;const P=(l=(o=document.getElementById("obliqueIframe"))==null?void 0:o.contentWindow)==null?void 0:l.vcs,C=(_=(d=P?.vcm)==null?void 0:d.Framework)==null?void 0:_.getInstance(),D=C?.getActiveMap();let w={};C&&e&&Array.isArray(e)&&e.length>1?(n("setLastCoordinates",e),(q=P?.vcm)!=null&&q.util&&(w=new P.vcm.util.ViewPoint({groundPosition:g.default.transform(mapCollection.getMapView("2D").getProjection().getCode(),"EPSG:4326",e),heading:t.heading,distance:D.getViewPointSync().distance})),yield C?.getActiveMap().gotoViewPoint(w),r("MapMarker/placingPointMarker",e,{root:!0}),r("MapMarker/rotatePointMarker",t.heading,{root:!0})):r("Alerting/addSingleAlert","<strong>"+f.t("additional:modules.tools.vcOblique.frameworkUndefined")+"</strong><br><small>"+f.t("additional:modules.tools.vcOblique.frameworkUndefinedMessage")+"</small>",{root:!0})})},setObliqueViewerURL({commit:a,dispatch:n,getters:r,rootGetters:t},e){if(e&&Array.isArray(e)&&e.length>1){const o=g.default.transform(mapCollection.getMapView("2D").getProjection().getCode(),"EPSG:4326",e),l=o[0]+", "+o[1];document.location.hostname==="localhost"?a("setObliqueViewerURL",(0,c.default)(t.getRestServiceById(r.serviceId).url)+"?groundPosition="+l):n("setObliqueViewerURLWithSameHostname",l)}},setObliqueViewerURLWithSameHostname({commit:a,dispatch:n,getters:r,rootGetters:t},e){const o=t.getRestServiceById(r.serviceId).url.split("https://")[1].split("/");document.location.hostname===o[0]?a("setObliqueViewerURL",t.getRestServiceById(r.serviceId).url+"?groundPosition="+e):document.location.hostname.startsWith("www.")&&document.location.hostname.split("www.")[1]===o[0]?n("setObliqueViewerURLWithReplacedHostname",{urlParts:o,startCoordinates:e}):n("Alerting/addSingleAlert",f.t("additional:modules.tools.vcOblique.sameOrigin"),{root:!0})},setObliqueViewerURLWithReplacedHostname({commit:a},{urlParts:n,startCoordinates:r}){let t="https:/";n.forEach((e,o)=>{o===0?t=t+"/"+document.location.hostname:t=t+"/"+e}),a("setObliqueViewerURL",t+"?groundPosition="+r)}}}).call(this,p(5))},3517:function(V,x,p){var f=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,y=(r,t,e)=>t in r?i(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h=(r,t)=>{for(var e in t||(t={}))b.call(t,e)&&y(r,e,t[e]);if(O)for(var e of O(t))M.call(t,e)&&y(r,e,t[e]);return r},v=(r,t)=>{for(var e in t)i(r,e,{get:t[e],enumerable:!0})},s=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of j(t))!b.call(r,l)&&l!==e&&i(r,l,{get:()=>t[l],enumerable:!(o=m(t,l))||o.enumerable});return r},u=(r,t,e)=>(e=r!=null?f(S(r)):{},s(t||!r||!r.__esModule?i(e,"default",{value:r,enumerable:!0}):e,r)),g=r=>s(i({},"__esModule",{value:!0}),r),c={};v(c,{default:()=>n}),V.exports=g(c);var E=p(7),I=u(p(3359)),n=h({},(0,E.generateSimpleGetters)(I.default))},3708:function(V,x,p){var f=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,y=(t,e,o)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,h=(t,e)=>{for(var o in e||(e={}))b.call(e,o)&&y(t,o,e[o]);if(O)for(var o of O(e))M.call(e,o)&&y(t,o,e[o]);return t},v=(t,e)=>{for(var o in e)i(t,o,{get:e[o],enumerable:!0})},s=(t,e,o,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let d of j(e))!b.call(t,d)&&d!==o&&i(t,d,{get:()=>e[d],enumerable:!(l=m(e,d))||l.enumerable});return t},u=(t,e,o)=>(o=t!=null?f(S(t)):{},s(e||!t||!t.__esModule?i(o,"default",{value:t,enumerable:!0}):o,t)),g=t=>s(i({},"__esModule",{value:!0}),t),c={};v(c,{default:()=>r}),V.exports=g(c);var E=u(p(3516)),I=u(p(3486)),a=u(p(3517)),n=u(p(3359)),r={namespaced:!0,state:h({},n.default),mutations:I.default,actions:E.default,getters:a.default}}}]);
